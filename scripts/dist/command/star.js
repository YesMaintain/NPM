import a from"fast-glob";import*as i from"fs";import{dirname as p}from"path";import{fileURLToPath as c}from"url";import f from"../lib/env.js";import d from"../lib/star-repository.js";const m=c(import.meta.url),h=p(m),l=async()=>{const r=new Set,s=await a(["**/package.json","!**/node_modules"],{absolute:!0,cwd:f.BASE_DIR});for(const t of s){const e=JSON.parse((await i.promises.readFile(t,"utf-8")).toString());for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&(o==="dependencies"||o==="devDependencies"))for(const n in e[o])Object.prototype.hasOwnProperty.call(e[o],n)&&r.add(n)}for(const t of r){const e=await(await fetch(`https://registry.npmjs.org/${t}`)).json();!e.repository||!e.repository.url||d(e.repository.url)}};var j=l;export{j as default};
