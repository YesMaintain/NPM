import s from"fast-glob";import{readFile as c}from"fs/promises";import p from"../lib/env.js";import i from"../lib/star-repository.js";var m=async()=>{const n=new Set,a=await s(["**/package.json","!**/node_modules"],{absolute:!0,cwd:p.BASE_DIR});for(const t of a){const e=JSON.parse((await c(t,"utf-8")).toString());for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&(o==="dependencies"||o==="devDependencies"))for(const r in e[o])Object.prototype.hasOwnProperty.call(e[o],r)&&n.add(r)}for(const t of n){const e=await(await fetch(`https://registry.npmjs.org/${t}`)).json();e.repository?.url&&i(e.repository.url)}};export{m as default};
